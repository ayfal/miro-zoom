<!DOCTYPE html>
<html>
<head>
  <title>Host</title>
  <script src="https://unpkg.com/peerjs/dist/peerjs.min.js"></script>
</head>
<body>
  <h2>Host Screen Share</h2>
  <p>Fixed ID: studyroom-host-unique-2025</p>
  <script>
    const peer = new Peer("studyroom-host-unique-2025"); // fixed ID

    async function startShare() {
      // Capture screen + mic
      const screenStream = await navigator.mediaDevices.getDisplayMedia({ video: true });
      const micStream = await navigator.mediaDevices.getUserMedia({ audio: true });

      // Merge audio tracks into screen stream
      micStream.getAudioTracks().forEach(track => screenStream.addTrack(track));

      peer.on('call', call => {
        call.answer(); // answer with no local video
        call.on('stream', remoteStream => {
          // optional: play viewer audio
          const audio = new Audio();
          audio.srcObject = remoteStream;
          audio.play();
        });
      });

      window.hostStream = screenStream;
    }

    startShare();
  </script>
</body>
</html>